<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>×™×•××Ÿ ×¢×‘×•×“×” ×™×•××™ - Stonhard Installation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Heebo', Arial, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
            direction: rtl;
            -webkit-font-smoothing: antialiased;
            padding-bottom: 30px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 10px;
        }
        
        .header {
            background: linear-gradient(135deg, #1a3d5c 0%, #2d5a7b 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(26, 61, 92, 0.2);
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .header .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #1a3d5c;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e1e8ed;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title .icon {
            font-size: 22px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        @media (min-width: 600px) {
            .form-row.cols-2 {
                grid-template-columns: 1fr 1fr;
            }
            .form-row.cols-3 {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 6px;
        }
        
        .form-group label.required::after {
            content: "*";
            color: #e74c3c;
            margin-right: 4px;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            direction: rtl;
            background: white;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #00a8e1;
            box-shadow: 0 0 0 3px rgba(0, 168, 225, 0.1);
        }
        
        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .form-group input[type="time"],
        .form-group input[type="date"] {
            direction: ltr;
            text-align: right;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 14px;
            overflow-x: auto;
            display: block;
        }
        
        @media (min-width: 600px) {
            table {
                display: table;
            }
        }
        
        thead {
            background: #f8f9fa;
        }
        
        th {
            padding: 12px 8px;
            text-align: right;
            font-weight: 600;
            color: #1a3d5c;
            border-bottom: 2px solid #e1e8ed;
        }
        
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #e1e8ed;
        }
        
        td input {
            width: 100%;
            padding: 8px;
            border: 1px solid #e1e8ed;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .add-row-btn {
            background: #00a8e1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .add-row-btn:active {
            transform: scale(0.98);
        }
        
        .signature-pad {
            border: 2px dashed #e1e8ed;
            border-radius: 8px;
            background: #f8f9fa;
            height: 150px;
            margin-top: 10px;
            cursor: crosshair;
            touch-action: none;
        }
        
        .signature-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .signature-controls button {
            padding: 8px 16px;
            border: 1px solid #e1e8ed;
            border-radius: 6px;
            background: white;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .signature-controls button:active {
            transform: scale(0.98);
        }
        
        .action-buttons {
            position: sticky;
            bottom: 10px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .btn {
            flex: 1;
            min-width: 150px;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-primary {
            background: #00a8e1;
            color: white;
        }
        
        .btn-success {
            background: #70ad47;
            color: white;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: none;
        }
        
        .alert.show {
            display: block;
        }
        
        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .alert-warning {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
        }
        
        .total-badge {
            background: #e8f4f8;
            padding: 8px 15px;
            border-radius: 6px;
            font-weight: 600;
            color: #1a3d5c;
            display: inline-block;
            margin-top: 10px;
        }
        
        @media print {
            .action-buttons,
            .add-row-btn,
            .signature-controls {
                display: none !important;
            }
            
            body {
                background: white;
            }
            
            .section {
                box-shadow: none;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“‹ ×™×•××Ÿ ×¢×‘×•×“×” ×™×•××™ - ×§×‘×œ×Ÿ ×‘××ª×¨</h1>
            <div class="subtitle">Stonhard Epoxy Flooring Installation | Daily Work Journal</div>
        </div>

        <div class="alert alert-warning" id="alertBox">
            âš ï¸ × × ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”××¡×•×× ×™× ×‘-*
        </div>

        <!-- Project Details Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">ğŸ—ï¸</span>
                ×¤×¨×˜×™ ×”×¤×¨×•×™×§×˜ ×•×”×§×‘×œ×Ÿ
            </div>
            <div class="form-row cols-2">
                <div class="form-group">
                    <label class="required">×©× ×”×¤×¨×•×™×§×˜/××ª×¨:</label>
                    <input type="text" id="projectName" value="×ª××¨ - ×¨×¦×¤×ª ××¤×•×§×¡×™ ×ª×¢×©×™×™×ª×™×ª" required>
                </div>
                <div class="form-group">
                    <label class="required">××¡×¤×¨ ×¤×¨×•×™×§×˜:</label>
                    <input type="text" id="projectNumber" required>
                </div>
            </div>
            <div class="form-row cols-2">
                <div class="form-group">
                    <label class="required">×›×ª×•×‘×ª ×”××ª×¨:</label>
                    <input type="text" id="siteAddress" value="××•×œ× ×™×™×¦×•×¨, ×§×™×¡×¨×™×”" required>
                </div>
                <div class="form-group">
                    <label>××¡×¤×¨ ×”×™×ª×¨ ×‘× ×™×™×”:</label>
                    <input type="text" id="permitNumber">
                </div>
            </div>
            <div class="form-row cols-2">
                <div class="form-group">
                    <label class="required">×©× ×”×§×‘×œ×Ÿ ×”×¨××©×™:</label>
                    <input type="text" id="contractorName" required>
                </div>
                <div class="form-group">
                    <label>××¡×¤×¨ ×¨×™×©×™×•×Ÿ ×§×‘×œ×Ÿ:</label>
                    <input type="text" id="licenseNumber">
                </div>
            </div>
            <div class="form-row cols-2">
                <div class="form-group">
                    <label class="required">×©× ×× ×”×œ ×”×¢×‘×•×“×” (Foreman):</label>
                    <input type="text" id="foremanName" required>
                </div>
                <div class="form-group">
                    <label class="required">×˜×œ×¤×•×Ÿ ×× ×”×œ ×¢×‘×•×“×”:</label>
                    <input type="tel" id="foremanPhone" required>
                </div>
            </div>
        </div>

        <!-- Daily Report Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">ğŸ“…</span>
                ×“×™×•×•×— ×™×•××™
            </div>
            <div class="form-row cols-3">
                <div class="form-group">
                    <label class="required">×ª××¨×™×š:</label>
                    <input type="date" id="reportDate" required>
                </div>
                <div class="form-group">
                    <label class="required">×™×•× ×‘×©×‘×•×¢:</label>
                    <input type="text" id="dayOfWeek" readonly>
                </div>
                <div class="form-group">
                    <label class="required">××–×’ ××•×•×™×¨:</label>
                    <select id="weather" required>
                        <option value="">×‘×—×¨...</option>
                        <option value="sunny">â˜€ï¸ ×©××©</option>
                        <option value="cloudy">â›… ××¢×•× ×Ÿ</option>
                        <option value="rainy">ğŸŒ§ï¸ ×’×©×•×</option>
                        <option value="windy">ğŸ’¨ ×¨×•×—</option>
                        <option value="hot">ğŸ”¥ ×—×</option>
                        <option value="cold">â„ï¸ ×§×¨</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Working Hours Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">â°</span>
                ×©×¢×•×ª ×¢×‘×•×“×”
            </div>
            <div class="form-row cols-3">
                <div class="form-group">
                    <label class="required">×©×¢×ª ×”×ª×—×œ×”:</label>
                    <input type="time" id="startTime" required>
                </div>
                <div class="form-group">
                    <label class="required">×©×¢×ª ×¡×™×•×:</label>
                    <input type="time" id="endTime" required>
                </div>
                <div class="form-group">
                    <label>×”×¤×¡×§×•×ª (×©×¢×•×ª):</label>
                    <input type="number" id="breakHours" value="0" step="0.5" min="0">
                </div>
            </div>
            <div class="total-badge">
                ×¡×”"×› ×©×¢×•×ª ×¢×‘×•×“×”: <span id="totalHours">0.0</span>
            </div>
        </div>

        <!-- Workforce Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">ğŸ‘·</span>
                ×›×•×— ××“× ×‘××ª×¨
            </div>
            <div style="overflow-x: auto;">
                <table id="workforceTable">
                    <thead>
                        <tr>
                            <th style="width: 25%;">×ª×¤×§×™×“/××§×¦×•×¢</th>
                            <th style="width: 15%;">××¡×¤×¨ ×¢×•×‘×“×™×</th>
                            <th style="width: 15%;">×©×¢×•×ª ×¢×‘×•×“×”</th>
                            <th style="width: 20%;">×§×‘×œ×Ÿ ××©× ×”</th>
                            <th style="width: 25%;">×”×¢×¨×•×ª</th>
                        </tr>
                    </thead>
                    <tbody id="workforceBody">
                        <tr>
                            <td><input type="text" placeholder="×œ×“×•×’××”: ×× ×”×œ ×¢×‘×•×“×”"></td>
                            <td><input type="number" min="0" class="worker-count"></td>
                            <td><input type="number" step="0.5" min="0"></td>
                            <td><input type="text"></td>
                            <td><input type="text"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <button class="add-row-btn" onclick="addWorkforceRow()">
                <span>â•</span> ×”×•×¡×£ ×©×•×¨×”
            </button>
            <div class="total-badge">
                ×¡×”"×› ×¢×•×‘×“×™×: <span id="totalWorkers">0</span>
            </div>
        </div>

        <!-- Activities Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">ğŸ”¨</span>
                ×ª×”×œ×™×›×™ ×‘×™×¦×•×¢ ×•×¤×¢×™×œ×•×™×•×ª
            </div>
            <div style="overflow-x: auto;">
                <table id="activitiesTable">
                    <thead>
                        <tr>
                            <th style="width: 25%;">×ª×™××•×¨ ×”×¢×‘×•×“×”/×ª×”×œ×™×š</th>
                            <th style="width: 15%;">××™×§×•× ×‘××ª×¨</th>
                            <th style="width: 15%;">×›××•×ª ×©×‘×•×¦×¢×”</th>
                            <th style="width: 10%;">×™×—×™×“×”</th>
                            <th style="width: 10%;">% ×”×ª×§×“××•×ª</th>
                            <th style="width: 15%;">×§×‘×œ×Ÿ ××‘×¦×¢</th>
                            <th style="width: 10%;">×”×¢×¨×•×ª</th>
                        </tr>
                    </thead>
                    <tbody id="activitiesBody">
                        <tr>
                            <td><input type="text" placeholder="×œ×“×•×’××”: ×œ×™×˜×•×© ×‘×˜×•×Ÿ Blastrac"></td>
                            <td><input type="text"></td>
                            <td><input type="number" min="0" step="0.1"></td>
                            <td><input type="text" placeholder="××´×¨"></td>
                            <td><input type="number" min="0" max="100"></td>
                            <td><input type="text"></td>
                            <td><input type="text"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <button class="add-row-btn" onclick="addActivityRow()">
                <span>â•</span> ×”×•×¡×£ ×¤×¢×™×œ×•×ª
            </button>
        </div>

        <!-- Materials Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">ğŸ“¦</span>
                ×—×•××¨×™× ×•×¦×™×•×“
            </div>
            <div style="overflow-x: auto;">
                <table id="materialsTable">
                    <thead>
                        <tr>
                            <th style="width: 20%;">×¡×•×’ ×—×•××¨/×¦×™×•×“</th>
                            <th style="width: 15%;">×›××•×ª ×©×”×’×™×¢×”</th>
                            <th style="width: 10%;">×™×—×™×“×”</th>
                            <th style="width: 15%;">×›××•×ª ×©×©×™××©×”</th>
                            <th style="width: 15%;">××¡×³ ×ª×¢×•×“×ª ××©×œ×•×—</th>
                            <th style="width: 15%;">×¡×¤×§</th>
                            <th style="width: 10%;">×”×¢×¨×•×ª</th>
                        </tr>
                    </thead>
                    <tbody id="materialsBody">
                        <tr>
                            <td><input type="text" placeholder="×œ×“×•×’××”: Stonclad GS"></td>
                            <td><input type="number" min="0" step="0.1"></td>
                            <td><input type="text" placeholder="×§×´×’"></td>
                            <td><input type="number" min="0" step="0.1"></td>
                            <td><input type="text"></td>
                            <td><input type="text" placeholder="Stonhard"></td>
                            <td><input type="text"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <button class="add-row-btn" onclick="addMaterialRow()">
                <span>â•</span> ×”×•×¡×£ ×—×•××¨
            </button>
        </div>

        <!-- Safety Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">âš ï¸</span>
                ×‘×˜×™×—×•×ª ×•××™×¨×•×¢×™×
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>×“×™×•×•×— ×‘×˜×™×—×•×ª×™:</label>
                    <textarea id="safetyReport" placeholder="×ª×™××•×¨ ××¦×‘ ×”×‘×˜×™×—×•×ª ×‘××ª×¨, ×©×™××•×© ×‘×¦×™×•×“ ××’×Ÿ ××™×©×™..."></textarea>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>×ª×§×œ×•×ª/×œ×™×§×•×™×™× ×©× ××¦××•:</label>
                    <textarea id="issues" placeholder="×¤×¨×˜ ×ª×§×œ×•×ª ××• ×œ×™×§×•×™×™× ×©×”×ª×’×œ×•..."></textarea>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>××™×¨×•×¢×™× ××™×•×—×“×™×:</label>
                    <textarea id="specialEvents" placeholder="××™×¨×•×¢×™ ×‘×˜×™×—×•×ª, ×‘×™×§×•×¨×™×, ×‘×“×™×§×•×ª..."></textarea>
                </div>
            </div>
        </div>

        <!-- General Notes Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">ğŸ“</span>
                ×”×¢×¨×•×ª ×›×œ×œ×™×•×ª ×•×ª×™×¢×•×“ × ×•×¡×£
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>×”× ×—×™×•×ª ×©×”×ª×§×‘×œ×•:</label>
                    <textarea id="instructions"></textarea>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>×‘×¢×™×•×ª/××›×©×•×œ×™×:</label>
                    <textarea id="problems"></textarea>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>×ª×™××•× × ×“×¨×©:</label>
                    <textarea id="coordination"></textarea>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>×”×¢×¨×•×ª ×—×©×‘ ×›××•×™×•×ª:</label>
                    <textarea id="quantityNotes"></textarea>
                </div>
            </div>
        </div>

        <!-- Signatures Section -->
        <div class="section">
            <div class="section-title">
                <span class="icon">âœï¸</span>
                ×—×ª×™××•×ª ×•××™×©×•×¨×™×
            </div>
            
            <div style="margin-bottom: 30px;">
                <div class="form-group">
                    <label class="required">×× ×”×œ ×”×¢×‘×•×“×” (Foreman):</label>
                    <input type="text" id="foremanSignatureName" placeholder="×©× ××œ×" required>
                </div>
                <label style="font-size: 14px; font-weight: 600; margin-top: 10px; display: block;">×—×ª×™××”:</label>
                <canvas id="foremanSignature" class="signature-pad" width="800" height="150"></canvas>
                <div class="signature-controls">
                    <button onclick="clearSignature('foremanSignature')">ğŸ—‘ï¸ × ×§×” ×—×ª×™××”</button>
                </div>
            </div>

            <div style="margin-bottom: 30px;">
                <div class="form-group">
                    <label class="required">×× ×”×œ ×¤×¨×•×™×§×˜ ×ª××¨ (Tamar Manager):</label>
                    <input type="text" id="tamarManagerName" placeholder="×©× ××œ×" required>
                </div>
                <label style="font-size: 14px; font-weight: 600; margin-top: 10px; display: block;">×—×ª×™××”:</label>
                <canvas id="tamarSignature" class="signature-pad" width="800" height="150"></canvas>
                <div class="signature-controls">
                    <button onclick="clearSignature('tamarSignature')">ğŸ—‘ï¸ × ×§×” ×—×ª×™××”</button>
                </div>
            </div>

            <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 20px; border-right: 4px solid #ffc107;">
                <strong>âš ï¸ ×—×©×•×‘:</strong> ×—×ª×™××ª ×× ×”×œ ×ª××¨ ×××©×¨×ª ××ª ×‘×™×¦×•×¢ ×”×¢×‘×•×“×•×ª ×”××¤×•×¨×˜×•×ª ×•×××¤×©×¨×ª ××ª ×”×ª×©×œ×•× ×”×™×•××™.
            </div>

            <div style="background: #e8f4f8; padding: 15px; border-radius: 8px; margin-top: 10px; font-size: 13px; color: #1a3d5c;">
                ğŸ“‹ ×™×•××Ÿ ×–×” ×× ×•×”×œ ×‘×”×ª×× ×œ×ª×§× ×•×ª ×”×ª×›× ×•×Ÿ ×•×”×‘× ×™×” (×¤×™×§×•×— ×¢×œ×™×•×Ÿ ×¢×œ ×”×‘× ×™×”), ×ª×©× "×‘-1992 ×•×ª×§× ×•×ª ×”×‘×˜×™×—×•×ª ×‘×¢×‘×•×“×” (×¢×‘×•×“×•×ª ×‘× ×™×”), ×ª×©×"×—-1988
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="saveToLocalStorage()">
                <span>ğŸ’¾</span> ×©××•×¨ ×˜×™×•×˜×”
            </button>
            <button class="btn btn-success" onclick="generatePDF()">
                <span>ğŸ“„</span> ×”×¤×§ PDF
            </button>
            <button class="btn btn-secondary" onclick="window.print()">
                <span>ğŸ–¨ï¸</span> ×”×“×¤×¡
            </button>
        </div>
    </div>

    <script>
        // Initialize signature pads
        let foremanPad = null;
        let tamarPad = null;
        
        window.onload = function() {
            initializeSignaturePads();
            setupDateHandling();
            setupWorkHoursCalculation();
            loadFromLocalStorage();
        };

        function initializeSignaturePads() {
            const foremanCanvas = document.getElementById('foremanSignature');
            const tamarCanvas = document.getElementById('tamarSignature');
            
            foremanPad = new SignaturePad(foremanCanvas);
            tamarPad = new SignaturePad(tamarCanvas);
        }

        function setupDateHandling() {
            const dateInput = document.getElementById('reportDate');
            const today = new Date().toISOString().split('T')[0];
            dateInput.value = today;
            updateDayOfWeek();
            
            dateInput.addEventListener('change', updateDayOfWeek);
        }

        function updateDayOfWeek() {
            const dateInput = document.getElementById('reportDate');
            const date = new Date(dateInput.value);
            const days = ['×¨××©×•×Ÿ', '×©× ×™', '×©×œ×™×©×™', '×¨×‘×™×¢×™', '×—××™×©×™', '×©×™×©×™', '×©×‘×ª'];
            document.getElementById('dayOfWeek').value = days[date.getDay()];
        }

        function setupWorkHoursCalculation() {
            ['startTime', 'endTime', 'breakHours'].forEach(id => {
                document.getElementById(id).addEventListener('change', calculateWorkHours);
            });
        }

        function calculateWorkHours() {
            const start = document.getElementById('startTime').value;
            const end = document.getElementById('endTime').value;
            const breaks = parseFloat(document.getElementById('breakHours').value) || 0;
            
            if (start && end) {
                const startTime = new Date('2000-01-01 ' + start);
                const endTime = new Date('2000-01-01 ' + end);
                let hours = (endTime - startTime) / (1000 * 60 * 60);
                hours -= breaks;
                document.getElementById('totalHours').textContent = hours.toFixed(1);
            }
        }

        function addWorkforceRow() {
            const tbody = document.getElementById('workforceBody');
            const row = tbody.insertRow();
            row.innerHTML = `
                <td><input type="text"></td>
                <td><input type="number" min="0" class="worker-count"></td>
                <td><input type="number" step="0.5" min="0"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
            `;
            updateWorkerCount();
        }

        function addActivityRow() {
            const tbody = document.getElementById('activitiesBody');
            const row = tbody.insertRow();
            row.innerHTML = `
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="number" min="0" step="0.1"></td>
                <td><input type="text"></td>
                <td><input type="number" min="0" max="100"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
            `;
        }

        function addMaterialRow() {
            const tbody = document.getElementById('materialsBody');
            const row = tbody.insertRow();
            row.innerHTML = `
                <td><input type="text"></td>
                <td><input type="number" min="0" step="0.1"></td>
                <td><input type="text"></td>
                <td><input type="number" min="0" step="0.1"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="text"></td>
            `;
        }

        function updateWorkerCount() {
            const counts = document.querySelectorAll('.worker-count');
            let total = 0;
            counts.forEach(input => {
                total += parseInt(input.value) || 0;
                input.addEventListener('change', updateWorkerCount);
            });
            document.getElementById('totalWorkers').textContent = total;
        }

        function clearSignature(canvasId) {
            if (canvasId === 'foremanSignature') {
                foremanPad.clear();
            } else {
                tamarPad.clear();
            }
        }

        function saveToLocalStorage() {
            const data = gatherFormData();
            localStorage.setItem('workJournal_' + data.date, JSON.stringify(data));
            showAlert('success', 'âœ… ×”×˜×™×•×˜×” × ×©××¨×” ×‘×”×¦×œ×—×”!');
        }

        function loadFromLocalStorage() {
            const today = new Date().toISOString().split('T')[0];
            const saved = localStorage.getItem('workJournal_' + today);
            if (saved) {
                // Load saved data
                const data = JSON.parse(saved);
                // Populate fields...
            }
        }

        function gatherFormData() {
            return {
                date: document.getElementById('reportDate').value,
                projectName: document.getElementById('projectName').value,
                // ... gather all other fields
            };
        }

        function generatePDF() {
            showAlert('success', 'ğŸ“„ ××™×™×¦×¨ PDF... (× ×“×¨×© ×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜)');
            window.print();
        }

        function showAlert(type, message) {
            const alert = document.getElementById('alertBox');
            alert.className = 'alert alert-' + type + ' show';
            alert.textContent = message;
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        // Simple signature pad implementation
        class SignaturePad {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.drawing = false;
                this.setupEvents();
                this.clear();
            }

            setupEvents() {
                this.canvas.addEventListener('mousedown', (e) => this.startDrawing(e));
                this.canvas.addEventListener('mousemove', (e) => this.draw(e));
                this.canvas.addEventListener('mouseup', () => this.stopDrawing());
                this.canvas.addEventListener('touchstart', (e) => this.startDrawing(e.touches[0]));
                this.canvas.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    this.draw(e.touches[0]);
                });
                this.canvas.addEventListener('touchend', () => this.stopDrawing());
            }

            startDrawing(e) {
                this.drawing = true;
                const rect = this.canvas.getBoundingClientRect();
                this.lastX = e.clientX - rect.left;
                this.lastY = e.clientY - rect.top;
            }

            draw(e) {
                if (!this.drawing) return;
                const rect = this.canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                this.ctx.beginPath();
                this.ctx.moveTo(this.lastX, this.lastY);
                this.ctx.lineTo(x, y);
                this.ctx.stroke();

                this.lastX = x;
                this.lastY = y;
            }

            stopDrawing() {
                this.drawing = false;
            }

            clear() {
                this.ctx.fillStyle = 'white';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.strokeStyle = '#2c3e50';
                this.ctx.lineWidth = 2;
                this.ctx.lineCap = 'round';
            }
        }

        // Auto-calculate workers on input
        document.addEventListener('input', (e) => {
            if (e.target.classList.contains('worker-count')) {
                updateWorkerCount();
            }
        });
    </script>
</body>
</html>
